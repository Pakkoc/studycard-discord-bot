# 📄 Discord Silent Study Tracker Bot – PRD

## 1. 제품 한줄 요약
조용한 디스코드 스터디 서버에서 음성 참여 시간을 자동으로 기록·시각화하고, 레벨·스트릭 캘린더로 멤버들의 학습 동기를 높여주는 한국어 기반 봇. (업적 시스템은 현재 비활성화)

## 2. 목표 및 성공 지표
1. **목표**
   - 객관적이고 신뢰할 수 있는 집중 시간 데이터를 제공한다.
   - 시각적 보상(프로필 카드·레벨·업적)으로 학습 참여율을 20% 이상 향상한다.
   - 서버장의 출석·활동 관리 업무 시간을 주당 2시간 이상 절감한다.
2. **성공 지표 (MVP 1개월 내)**
   - 주간 재사용률 (WAU/MAU) ≥ 60%
   - 평균 일일 음성 집중 시간 3h 이상/활성 사용자
   - 버그·다운타임 99% 이하로 유지

## 3. 타깃 사용자
- 한국어 기반 ‘무음 공부방’ 디스코드 서버(200~1,000명) 멤버
- 중학생부터 성인까지 다양한 연령
- 서버장(관리자) 1명 및 소수 운영진

## 4. 핵심 페인포인트
1. 음성 접속만으로는 실제 집중 시간을 객관적으로 파악하기 어렵다.
2. 서버장이 수기로 출석·활동 기록을 관리해야 해 번거롭다.
3. 보상 구조가 부족해 멤버 참여율이 시간이 지나면 감소한다.
4. 활동 데이터를 기반으로 보상·역할을 주고 싶지만 기준 데이터가 없다.

## 5. 주요 기능 (스코프)
| 분류 | 기능 | 설명 | MVP 포함 |
|------|------|------|---------|
| 활동 추적 | 음성 접속 시간 기록 | `on_voice_state_update` 이벤트로 시작·종료 시각 저장 | ✅ |
| 시각화 | 프로필 카드 | 오늘·주·월·누적 시간, 레벨, 업적을 이미지 카드로 렌더링 (`/profile`) | ✅ |
| 보상 | 레벨/XP 시스템 | 음성 1시간 = 1XP, 단계별 필요 XP(10단계): 100, 150, 250, 400, 600, 850, 1150, 1550, 2000 (최대 레벨: 현자) | ✅ |
| 보상 | 업적/배지 | (현재 비활성화) | ⏸ (비활성) |
| 보상 | 스트릭 캘린더 | 최근 30일 달력에 참여 여부 표시 (`/streak`) | ✅ |
| 접근성 | 다국어 지원 | (현재 비활성화) | ⏸ (비활성) |
| 관리자 | 활동 요약 리포트 | 매일·매주 DM으로 서버장에게 활동 요약 전송 | ⏩(Phase 2) |
| 관리자 | 웹 대시보드 | 멤버 리스트, 필터, CSV 다운로드 (Next.js) | ⏩(Phase 2) |

## 6. 비-기능 요구사항
1. **가용성**: 24/7 가동, 다운타임 <1% (systemd 재시작, 모니터링)
2. **성능**: 1,000 동시 접속 시 이벤트 누락 없이 처리
3. **보안**: Discord 토큰·DB 키는 `.env`, 서버 방화벽 활성화
4. **다국어**: (현재 비활성화)
5. **확장성**: 다른 서버로 확장 시 Guild 단위 설정 저장 가능하도록 설계

## 7. MVP 범위 및 일정
| 주차 | 작업 | 결과물 |
|------|------|--------|
| 1주 | 프로젝트 세팅, DB 모델링, 음성 세션 기록 | 기본 데이터 적재 가능 |
| 2주 | 레벨/XP 계산 로직, 프로필 카드 임베드(텍스트) | `/profile` 텍스트 버전 |
| 3주 | Pillow 기반 이미지 카드, 스트릭 캘린더 렌더링 | 시각화 완성 |
| 4주 | 한국어 UI 완성, 베타 배포 | 내부 서버 테스트 |

## 8. 장기 로드맵
- **Phase 2 (1~2개월)**: 관리자 웹 대시보드, 활동 요약 DM
- **Phase 3 (3개월~)**: 퍼블릭 배포, 구독형 프리미엄 플랜, 역할 자동 부여, AI 학습 리포트

## 9. 출시 후 지표 모니터링
- DAU, 평균 집중 시간, 스트릭 유지율, 서버장 만족도 인터뷰

## 10. 리스크 및 완화
| 리스크 | 레벨 | 대응 |
|---------|------|------|
| Oracle Cloud 무료 VM 불안정 | 높음 | 외부 UptimeRobot 모니터링, 주기적 백업, 필요 시 AWS Lightsail로 이중화 |
| Discord API 변경 | 중간 | 정기 라이브러리 업데이트, 릴리즈 노트 확인 |
| 사용자 수 급증 시 성능 | 중간 | DB 인덱스 최적화, 세션 집계 배치 처리 |

---

## 11. 부록 – 데이터 모델 초안
- `users(user_id, username, avatar_url, joined_at)`
- `voice_sessions(id, user_id, guild_id, started_at, ended_at, duration_sec)`
- `daily_stats(user_id, date, duration_sec, xp_gain)`
  
- `guild_settings(guild_id, lang, premium_flag, …)`

(세부 ERD는 TRD 문서에 포함)